//был

using System;
using System.Collections.Generic;

namespace func_rocket
{
    public class LevelsTask
    {
        static readonly Physics standardPhysics = new Physics();

        private static Level LevelZero() => new Level("Zero",
                new Rocket(new Vector(200, 500), Vector.Zero, -0.5 * Math.PI),
                new Vector(600, 200),
                (size, v) => Vector.Zero, standardPhysics);

        private static Level LevelHeavy() => new Level("Heavy",
                new Rocket(new Vector(200, 500), Vector.Zero, -0.5 * Math.PI),
                new Vector(700, 500),
                (size, v) => new Vector(0, 0.9),
                standardPhysics);

        private static Level LevelUp() => new Level("Up",
                new Rocket(new Vector(200, 500), Vector.Zero, -0.5 * Math.PI),
                new Vector(700, 500),
                (size, v) => new Vector(0, -300 / (300 + size.Height - v.Y)),
                standardPhysics);

        private static IEnumerable<Level> LevelsWithHoles()
        {
            var rocket = new Rocket(new Vector(200, 500), Vector.Zero, -0.5 * Math.PI);
            var target = new Vector(700, 500);
            var blackhole = (target + rocket.Location) * 0.5;
            Gravity whiteGravity = (size, v) => {
                var dir = target - v;
                var d = dir.Length;
                return dir.Normalize() * -140 * d / (d * d + 1);
            };
            Gravity blackGravity = (size, v) => {
                var dir = blackhole - v;
                var d = dir.Length;
                return dir.Normalize() * 300 * d / (d * d + 1);
            };
            Gravity mixedGravity = (size, v) =>
                (whiteGravity(size, v) + blackGravity(size, v)) * 0.5;
            yield return new Level("WhiteHole", rocket, target, whiteGravity, standardPhysics);
            yield return new Level("BlackHole", rocket, target, blackGravity, standardPhysics);
            yield return new Level("BlackAndWhite", rocket, target, mixedGravity, standardPhysics);
        }

        public static IEnumerable<Level> CreateLevels()
        {
            yield return LevelZero();
            yield return LevelHeavy();
            yield return LevelUp();
            foreach (var level in LevelsWithHoles())
                yield return level;
        }
    }
}


//стал

using System;
using System.Collections.Generic;

namespace func_rocket
{
    public class LevelsTask
    {
        static readonly Physics standardPhysics = new Physics();

        private static Level LevelZero() => new Level("Zero",
                new Rocket(new Vector(200, 500), new Vector(0, 0), -0.5 * Math.PI),
                new Vector(600, 200),
                (size, v) => new Vector(0, 0), standardPhysics);

        private static Level LevelHeavy() => new Level("Heavy",
                new Rocket(new Vector(200, 500), new Vector(0, 0), -0.5 * Math.PI),
                new Vector(700, 500),
                (size, v) => new Vector(0, 0.9), standardPhysics);

        private static Level LevelUp() => new Level("Up",
                new Rocket(new Vector(200, 500), new Vector(0, 0), -0.5 * Math.PI),
                new Vector(700, 500),
                (size, v) => new Vector(0, -300 / (size.Height - v.Y + 300)), standardPhysics);

        private static IEnumerable<Level> LevelsWithHoles()
        {
            var obj = new Vector(700, 500);
            var blackhole = (obj + (new Rocket(new Vector(200, 500), new Vector(0, 0), -0.5 * Math.PI)).Location) * 0.5;
            
            Gravity white = (size, v) => {
                var differenceLength = (obj - v).Length;
                return (obj - v).Normalize() * -140 * differenceLength / (differenceLength * differenceLength + 1);
            };
            
            Gravity black = (size, v) => {
                var differenceLenght = (blackhole - v).Length;
                return (blackhole - v).Normalize() * 300 * differenceLenght / (differenceLenght * differenceLenght + 1);
            };
            
            var r = new Rocket(new Vector(200, 500), new Vector(0, 0), -0.5 * Math.PI);
            
            Gravity mixedGravity = (size, v) =>
                (white(size, v) + black(size, v)) * 0.5;
            
            yield return new Level("WhiteHole", r, obj, white, standardPhysics);
            yield return new Level("BlackHole", r, obj, black, standardPhysics);
            yield return new Level("BlackAndWhite", r, obj, mixedGravity, standardPhysics);
        }

        public static IEnumerable<Level> CreateLevels()
        {
            yield return LevelZero();
            yield return LevelHeavy();
            yield return LevelUp();
            foreach (var e in LevelsWithHoles())
                yield return e;
        }
    }
}
